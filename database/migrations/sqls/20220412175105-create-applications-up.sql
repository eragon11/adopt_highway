-- great mapping between contacts and users
EXEC sp_executesql @stmt=N'IF ((SELECT OBJECT_ID(''APPLICATIONS'',''U'')) IS NULL)
CREATE TABLE APPLICATIONS (
    APPLICATION_ID int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    APPLICATION_TOKEN uniqueidentifier DEFAULT (newid()) NULL,
    ACCESS_TOKEN uniqueidentifier DEFAULT (newid()) NULL,
    CREATED_ON datetime2 DEFAULT(GETDATE()) NOT NULL,
    EXPIRES_ON datetime2 DEFAULT(DATEADD(WW, 2, GETDATE())) NOT NULL,
    EMAIL varchar(255) NOT NULL,
    STATUS varchar(50) DEFAULT(''NOT CONFIRMED'') NOT NULL,
    IS_SCHOOL  bit DEFAULT(0) NOT NULL,
    GROUP_NAME VARCHAR(200) NOT NULL,
    GROUP_ADDRESS_LINE1 VARCHAR(50) NOT NULL,
    GROUP_ADDRESS_LINE2 VARCHAR(50) NULL,
    GROUP_CITY NVARCHAR(50) NOT NULL,
    GROUP_POSTAL_CODE NVARCHAR(10) NOT NULL,
    GROUP_DESCRIPTION  VARCHAR(500) NULL,
    GROUP_WEBSITE_URL  VARCHAR(255) NULL,
    ESTIMATE_NUMBER_OF_VOLUNTEERS int DEFAULT(0) NOT NULL,
    COUNTY VARCHAR(30) NOT NULL,
    GROUP_TYPE VARCHAR(30) NOT NULL,
    PRIMARY_CONTACT_FIRST_NAME VARCHAR(30) NOT NULL,
    PRIMARY_CONTACT_LAST_NAME VARCHAR(30) NOT NULL,
    PRIMARY_CONTACT_ADDRESS_LINE1 VARCHAR(50) NOT NULL,
    PRIMARY_CONTACT_ADDRESS_LINE2 VARCHAR(50) NULL,
    PRIMARY_CONTACT_CITY VARCHAR(50) NOT NULL,
    PRIMARY_CONTACT_POSTAL_CODE VARCHAR(10) NOT NULL,
    PRIMARY_CONTACT_PHONE_NUMBER VARCHAR(20) NULL,
    SECONDARY_CONTACT_FIRST_NAME VARCHAR(30) NULL,
    SECONDARY_CONTACT_LAST_NAME VARCHAR(30) NULL,
    SECONDARY_CONTACT_ADDRESS_LINE1 VARCHAR(50) NULL,
    SECONDARY_CONTACT_ADDRESS_LINE2 VARCHAR(50) NULL,
    SECONDARY_CONTACT_CITY VARCHAR(50) NULL,
    SECONDARY_CONTACT_POSTAL_CODE VARCHAR(10) NULL,
    SECONDARY_CONTACT_PHONE_NUMBER  VARCHAR(20) NULL,
    SCHOOL_NAME VARCHAR(50) NULL,
    SCHOOL_EMAIL VARCHAR(50) NULL,
    SCHOOL_PHONE_NUMBER VARCHAR(20) NULL,
    REQUESTED_HIGHWAY_DESCRIPTION VARCHAR(500) NULL,
    REQUESTED_ALTERNATE_HIGHWAY_DESCRIPTION VARCHAR(500) NULL,
    REQUESTED_HIGHWAY_COUNTY VARCHAR(30) NULL,
    SIGN_LINE_1 CHAR(13) NOT NULL,
    SIGN_LINE_2 CHAR(13) NULL,
    SIGN_LINE_3 CHAR(13) NULL,
    SIGN_LINE_4 CHAR(13) NULL,
    DELETED_AT DATETIME2 NULL,
    CONSTRAINT [AK_APPLICATIONS] UNIQUE(ACCESS_TOKEN)
);'
